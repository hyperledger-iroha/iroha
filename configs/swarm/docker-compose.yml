# target/release/iroha_swarm -p 4 -s xyzzy -c ./configs/swarm -i hyperledger/iroha:dev -o ./configs/swarm/docker-compose.yml -HF
# 
# This configuration has been generated by `iroha_swarm` using the above settings.
# You should not edit this manually.

services:
  image_provider:
    image: hyperledger/iroha:dev
    pull_policy: missing
    command: echo ok
  irohad0:
    depends_on:
    - image_provider
    image: hyperledger/iroha:dev
    pull_policy: never
    environment:
      CHAIN_ID: 00000000-0000-0000-0000-000000000000
      PUBLIC_KEY: ed012018CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91
      PRIVATE_KEY: 802640268A94EC4A0FD1BEEC8ABD0A6CC184BCC5090698ADFF08758016D509F75FB6EC18CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91
      P2P_ADDRESS: 0.0.0.0:1337
      API_ADDRESS: 0.0.0.0:8080
      GENESIS_PUBLIC_KEY: ed0120AC9417E94E01FC2C3120AC6D6CE51C1567FE80BFBDA7A11A431D8D81E88A50C8
      SUMERAGI_TRUSTED_PEERS: '[{"address":"irohad3:1340","public_key":"ed01205A8F726921298226365765DA6A3DE40C8EFD650A60081951CFFCFA69255CEF60"},{"address":"irohad1:1338","public_key":"ed012064B29A7C9F90B223FE062D1BFFD794773C3385D3DE2E44FC935F7E5F97E37F6A"},{"address":"irohad2:1339","public_key":"ed0120BF4D7AB1A245F6432A2D8BD8C9D4F947FF750F9C35D9BD1F60E55A55DA50DDBE"}]'
      GENESIS_SIGNED_FILE: /tmp/genesis.signed.scale
    ports:
    - 1337:1337
    - 8080:8080
    volumes:
    - ./:/config
    init: true
    healthcheck:
      test: test $(curl -s http://127.0.0.1:8080/status/blocks) -gt 0
      interval: 2s
      timeout: 1s
      retries: 30
      start_period: 4s
    command: |-
      /bin/sh -c "
        kagami genesis sign /config/genesis.json \
          --public-key ed012018CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91 \
          --private-key 802640268A94EC4A0FD1BEEC8ABD0A6CC184BCC5090698ADFF08758016D509F75FB6EC18CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91 \
          --out-file /tmp/genesis.signed.scale && \
        irohad --submit-genesis
      "
  irohad1:
    depends_on:
    - image_provider
    image: hyperledger/iroha:dev
    pull_policy: never
    environment:
      CHAIN_ID: 00000000-0000-0000-0000-000000000000
      PUBLIC_KEY: ed012064B29A7C9F90B223FE062D1BFFD794773C3385D3DE2E44FC935F7E5F97E37F6A
      PRIVATE_KEY: 802640FEE265549A2E1FD847806B89A861F087C40F6E186A106B81E72AEAE89A38A09264B29A7C9F90B223FE062D1BFFD794773C3385D3DE2E44FC935F7E5F97E37F6A
      P2P_ADDRESS: 0.0.0.0:1338
      API_ADDRESS: 0.0.0.0:8081
      GENESIS_PUBLIC_KEY: ed0120AC9417E94E01FC2C3120AC6D6CE51C1567FE80BFBDA7A11A431D8D81E88A50C8
      SUMERAGI_TRUSTED_PEERS: '[{"address":"irohad0:1337","public_key":"ed012018CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91"},{"address":"irohad3:1340","public_key":"ed01205A8F726921298226365765DA6A3DE40C8EFD650A60081951CFFCFA69255CEF60"},{"address":"irohad2:1339","public_key":"ed0120BF4D7AB1A245F6432A2D8BD8C9D4F947FF750F9C35D9BD1F60E55A55DA50DDBE"}]'
    ports:
    - 1338:1338
    - 8081:8081
    volumes:
    - ./:/config
    init: true
    healthcheck:
      test: test $(curl -s http://127.0.0.1:8081/status/blocks) -gt 0
      interval: 2s
      timeout: 1s
      retries: 30
      start_period: 4s
  irohad2:
    depends_on:
    - image_provider
    image: hyperledger/iroha:dev
    pull_policy: never
    environment:
      CHAIN_ID: 00000000-0000-0000-0000-000000000000
      PUBLIC_KEY: ed0120BF4D7AB1A245F6432A2D8BD8C9D4F947FF750F9C35D9BD1F60E55A55DA50DDBE
      PRIVATE_KEY: 802640430D9A18017ABDC37851F75235371D8A3BF43DDD2FCB011B5ABC19215F9E0A05BF4D7AB1A245F6432A2D8BD8C9D4F947FF750F9C35D9BD1F60E55A55DA50DDBE
      P2P_ADDRESS: 0.0.0.0:1339
      API_ADDRESS: 0.0.0.0:8082
      GENESIS_PUBLIC_KEY: ed0120AC9417E94E01FC2C3120AC6D6CE51C1567FE80BFBDA7A11A431D8D81E88A50C8
      SUMERAGI_TRUSTED_PEERS: '[{"address":"irohad0:1337","public_key":"ed012018CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91"},{"address":"irohad3:1340","public_key":"ed01205A8F726921298226365765DA6A3DE40C8EFD650A60081951CFFCFA69255CEF60"},{"address":"irohad1:1338","public_key":"ed012064B29A7C9F90B223FE062D1BFFD794773C3385D3DE2E44FC935F7E5F97E37F6A"}]'
    ports:
    - 1339:1339
    - 8082:8082
    volumes:
    - ./:/config
    init: true
    healthcheck:
      test: test $(curl -s http://127.0.0.1:8082/status/blocks) -gt 0
      interval: 2s
      timeout: 1s
      retries: 30
      start_period: 4s
  irohad3:
    depends_on:
    - image_provider
    image: hyperledger/iroha:dev
    pull_policy: never
    environment:
      CHAIN_ID: 00000000-0000-0000-0000-000000000000
      PUBLIC_KEY: ed01205A8F726921298226365765DA6A3DE40C8EFD650A60081951CFFCFA69255CEF60
      PRIVATE_KEY: 802640FC09193FC9EBDB078E1FA179AABAF3AF6AC878D45B6E8FF3C54CB9539B4E07505A8F726921298226365765DA6A3DE40C8EFD650A60081951CFFCFA69255CEF60
      P2P_ADDRESS: 0.0.0.0:1340
      API_ADDRESS: 0.0.0.0:8083
      GENESIS_PUBLIC_KEY: ed0120AC9417E94E01FC2C3120AC6D6CE51C1567FE80BFBDA7A11A431D8D81E88A50C8
      SUMERAGI_TRUSTED_PEERS: '[{"address":"irohad0:1337","public_key":"ed012018CC218A5830112811C85287E43CEE37A81CBACEA72CFAB6A855E4A89BD60A91"},{"address":"irohad1:1338","public_key":"ed012064B29A7C9F90B223FE062D1BFFD794773C3385D3DE2E44FC935F7E5F97E37F6A"},{"address":"irohad2:1339","public_key":"ed0120BF4D7AB1A245F6432A2D8BD8C9D4F947FF750F9C35D9BD1F60E55A55DA50DDBE"}]'
    ports:
    - 1340:1340
    - 8083:8083
    volumes:
    - ./:/config
    init: true
    healthcheck:
      test: test $(curl -s http://127.0.0.1:8083/status/blocks) -gt 0
      interval: 2s
      timeout: 1s
      retries: 30
      start_period: 4s
