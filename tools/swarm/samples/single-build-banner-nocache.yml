# Multi-line banner 1
# Multi-line banner 2

services:
  image_provider:
    image: hyperledger/iroha:dev
    build: ../..
    pull_policy: build
    command: echo ok
  irohad0:
    depends_on:
      - image_provider
    image: hyperledger/iroha:dev
    pull_policy: never
    environment:
      CHAIN_ID: 00000000-0000-0000-0000-000000000000
      PUBLIC_KEY: ed012087FDCACF58B891947600B0C37795CADB5A2AE6DE612338FDA9489AB21CE427BA
      PRIVATE_KEY: 802640F173D8C4913E2244715B9BF810AC0A4DBE1C9E08F595C8D9510E3E335EF964BB87FDCACF58B891947600B0C37795CADB5A2AE6DE612338FDA9489AB21CE427BA
      P2P_ADDRESS: 0.0.0.0:1337
      API_ADDRESS: 0.0.0.0:8080
      GENESIS_PUBLIC_KEY: ed0120F9F92758E815121F637C9704DFDA54842BA937AA721C0603018E208D6E25787E
      GENESIS_SIGNED_FILE: /tmp/genesis.signed.scale
    ports:
      - 1337:1337
      - 8080:8080
    volumes:
      - ./:/config
    init: true
    command: |-
      /bin/sh -c "
        kagami genesis sign /config/genesis.json \
          --public-key ed012087FDCACF58B891947600B0C37795CADB5A2AE6DE612338FDA9489AB21CE427BA \
          --private-key 802640F173D8C4913E2244715B9BF810AC0A4DBE1C9E08F595C8D9510E3E335EF964BB87FDCACF58B891947600B0C37795CADB5A2AE6DE612338FDA9489AB21CE427BA \
          --out-file /tmp/genesis.signed.scale && \
        irohad --submit-genesis
      "
